PREFIX org: <http://www.w3.org/ns/org#>
PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
PREFIX dct: <http://purl.org/dc/terms/>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX haOrg: <https://data.hetarchief.be/ns/organization/>
PREFIX haPref: <https://data.hetarchief.be/id/organization-preferences/>

SELECT DISTINCT 
?id
?dcterms_description
?foaf_homepage
# ?ha_org_allows_bzt
# ?ha_org_allows_iiif
# ?ha_org_allows_overlay
?ha_org_has_logo
?ha_org_request_form
?ha_org_sector
?org_classification
?org_identifier
?skos_pref_label
?created_at
?updated_at
FROM <https://data.hetarchief.be/graph/thesaurus/thesauri>
FROM <https://data.hetarchief.be/graph/thesaurus/licenses>
FROM <https://data.hetarchief.be/graph/organization>
FROM <https://data.hetarchief.be/graph/thesaurus/namenlijst>
FROM <https://data.hetarchief.be/graph/metadata/OR-0z70w1b>
FROM <https://data.hetarchief.be/graph/metadata/OR-zc7rt4f>
FROM <https://data.hetarchief.be/graph/metadata/OR-v97zq9j>
FROM <https://data.hetarchief.be/graph/metadata/OR-gh9b857>
WHERE {
  ?id a haOrg:ContentPartner;
      org:identifier ?org_identifier;
      skos:prefLabel ?skos_pref_label.

  OPTIONAL { ?id dct:description ?dcterms_description }
  OPTIONAL { ?id dct:description ?dcterms_description }
  OPTIONAL { ?id foaf:homepage ?foaf_homepage }
  OPTIONAL { ?id haOrg:hasLogo ?ha_org_has_logo }
  # BIND (EXISTS { ?id haOrg:hasPreference haPref:logo-embedding } AS ?ha_org_allows_overlay)
  # BIND (EXISTS { ?id haOrg:hasPreference haPref:visitor-space-publication } AS ?ha_org_allows_bzt)
  # BIND (EXISTS { ?id haOrg:hasPreference haPref:iiif-dissemination } AS ?ha_org_allows_iiif)
  OPTIONAL { ?id haOrg:requestForm ?ha_org_request_form } 
  OPTIONAL { ?id haOrg:sector ?ha_org_sector } 
  OPTIONAL { 
    ?id org:classification/skos:prefLabel ?org_classification .
    FILTER langMatches(lang(?org_classification), "nl") 
  }
}
